<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Planes disponibles</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <!-- LOADING -->
  <ion-spinner *ngIf="cargando" name="crescent"></ion-spinner>

  <!-- MENSAJE SI NO HAY PLANES -->
  <div *ngIf="!cargando && planes.length === 0" class="no-data">
    No hay planes disponibles.
  </div>

  <!-- LISTA DE PLANES -->
  <ion-grid>
    <ion-row>
      <ion-col size="12" sizeMd="6" sizeLg="4"
               *ngFor="let plan of planes">

        <ion-card>
          <img *ngIf="plan.imagen_url" [src]="plan.imagen_url" />

          <ion-card-header>
            <ion-card-title>{{ plan.nombre_comercial }}</ion-card-title>
            <ion-card-subtitle>\${{ plan.precio }}</ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <p>{{ plan.descripcion }}</p>

            <ion-list>
              <ion-item lines="none">
                <ion-label>Datos: {{ plan.caracteristicas.datos_mensuales }}</ion-label>
              </ion-item>
              <ion-item lines="none">
                <ion-label>Minutos: {{ plan.caracteristicas.minutos }}</ion-label>
              </ion-item>
              <ion-item lines="none">
                <ion-label>SMS: {{ plan.caracteristicas.sms }}</ion-label>
              </ion-item>
            </ion-list>

            <ion-button expand="block" color="primary">
              Ver detalles
            </ion-button>

            <!-- INVITADO: solo ver -->
            <ion-button
              *ngIf="!rol"
              expand="block"
              fill="outline"
              color="medium"
              routerLink="/login"
              >
              Inicia sesión para contratar
            </ion-button>

            <!-- SOLO USUARIO REGISTRADO -->
            <ion-button
              *ngIf="rol === 'usuario_registrado'"
              expand="block"
              color="success">
              Solicitar contratación
            </ion-button>

            <!-- SOLO ASESOR -->
            <ion-button
              *ngIf="rol === 'asesor_comercial'"
              expand="block"
              color="warning">
              Editar plan
            </ion-button>

          </ion-card-content>
        </ion-card>

      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
